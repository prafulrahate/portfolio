<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title></title>
</head>
<body>
&lt;?php<br/>
<br/>
 <br/>
    class TokenGenerator<br/>
    {<br/>
        private $authServiceUrl = &#39;https://authservice.priaid.ch/login&#39;; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;private $username = &#39;n6TFa_GMAIL_COM_AUT&#39;;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;private $password = &#39;Pb9e3SFk6c2G4WqXx&#39;;<br/>
        <br/>
        <br/>
        function __construct($username, $pasword, $authServiceUrl) {<br/>
            $this&ndash;&gt;username = $username;<br/>
            $this&ndash;&gt;password = $pasword;<br/>
            $this&ndash;&gt;authServiceUrl = $authServiceUrl;<br/>
        }<br/>
        <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;public function loadToken()<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$computedHash = base64_encode(hash_hmac ( &#39;md5&#39; , $this&ndash;&gt;authServiceUrl , $this&ndash;&gt;password, true ));<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$authorization = &#39;Authorization: Bearer &#39;.$this&ndash;&gt;username.&#39;:&#39;.$computedHash;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$curl = curl_init();<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;curl_setopt($curl, CURLOPT_POST, true);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;curl_setopt($curl, CURLOPT_POSTFIELDS, &#39;&#39;);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;curl_setopt($curl, CURLOPT_HTTPHEADER, array(&#39;Content&ndash;Type: application/json&#39; , $authorization ));<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;curl_setopt($curl, CURLOPT_URL, $this&ndash;&gt;authServiceUrl);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;curl_setopt($curl, CURLOPT_SSL_VERIFYPEER, false);<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$result = curl_exec($curl);<br/>
            $obj = json_decode($result);<br/>
            $info = curl_getinfo($curl);<br/>
            curl_close($curl);<br/>
            <br/>
            if($info[&#39;http_code&#39;] != &#39;200&#39;)<br/>
            {<br/>
               <br/>
                echo($obj);<br/>
                return NULL;<br/>
            }<br/>
            <br/>
            return $obj;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
    }<br/>
?&gt;</body></html>